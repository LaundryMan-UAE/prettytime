//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/nbransby/Documents/prettytime/core/src/main/java/org/ocpsoft/prettytime/PrettyTime.java
//

#include "Century.h"
#include "Day.h"
#include "Decade.h"
#include "Duration.h"
#include "DurationImpl.h"
#include "Hour.h"
#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "JustNow.h"
#include "LocaleAware.h"
#include "Millennium.h"
#include "Millisecond.h"
#include "Minute.h"
#include "Month.h"
#include "PrettyTime.h"
#include "ResourcesTimeFormat.h"
#include "ResourcesTimeUnit.h"
#include "Second.h"
#include "TimeFormat.h"
#include "TimeUnit.h"
#include "TimeUnitComparator.h"
#include "Week.h"
#include "Year.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "java/util/Calendar.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/Date.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Locale.h"
#include "java/util/Map.h"
#include "java/util/Set.h"

__attribute__((unused)) static void OrgOcpsoftPrettytimePrettyTime_initTimeUnits(OrgOcpsoftPrettytimePrettyTime *self);
__attribute__((unused)) static void OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(OrgOcpsoftPrettytimePrettyTime *self, OrgOcpsoftPrettytimeImplResourcesTimeUnit *unit);
__attribute__((unused)) static id<OrgOcpsoftPrettytimeDuration> OrgOcpsoftPrettytimePrettyTime_calculateDurationWithLong_(OrgOcpsoftPrettytimePrettyTime *self, jlong difference);
__attribute__((unused)) static jlong OrgOcpsoftPrettytimePrettyTime_getSignWithLong_(OrgOcpsoftPrettytimePrettyTime *self, jlong difference);

@interface OrgOcpsoftPrettytimePrettyTime () {
 @public
  JavaUtilDate *reference_;
  JavaUtilLocale *locale_;
  id<JavaUtilMap> units_;
  id<JavaUtilList> mCachedUnits_;
}

- (void)initTimeUnits OBJC_METHOD_FAMILY_NONE;

- (void)addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit:(OrgOcpsoftPrettytimeImplResourcesTimeUnit *)unit;

- (id<OrgOcpsoftPrettytimeDuration>)calculateDurationWithLong:(jlong)difference;

- (jlong)getSignWithLong:(jlong)difference;
@end

J2OBJC_FIELD_SETTER(OrgOcpsoftPrettytimePrettyTime, reference_, JavaUtilDate *)
J2OBJC_FIELD_SETTER(OrgOcpsoftPrettytimePrettyTime, locale_, JavaUtilLocale *)
J2OBJC_FIELD_SETTER(OrgOcpsoftPrettytimePrettyTime, units_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgOcpsoftPrettytimePrettyTime, mCachedUnits_, id<JavaUtilList>)

@implementation OrgOcpsoftPrettytimePrettyTime

- (instancetype)initOrgOcpsoftPrettytimePrettyTime {
  if (self = [super init]) {
    OrgOcpsoftPrettytimePrettyTime_set_locale_(self, JavaUtilLocale_getDefault());
    OrgOcpsoftPrettytimePrettyTime_setAndConsume_units_(self, [[JavaUtilLinkedHashMap alloc] init]);
    OrgOcpsoftPrettytimePrettyTime_initTimeUnits(self);
  }
  return self;
}

- (instancetype)init {
  return [self initOrgOcpsoftPrettytimePrettyTime];
}

- (instancetype)initWithJavaUtilDate:(JavaUtilDate *)reference {
  if (self = [self initOrgOcpsoftPrettytimePrettyTime]) {
    [self setReferenceWithJavaUtilDate:reference];
  }
  return self;
}

- (instancetype)initOrgOcpsoftPrettytimePrettyTimeWithJavaUtilLocale:(JavaUtilLocale *)locale {
  if (self = [super init]) {
    OrgOcpsoftPrettytimePrettyTime_set_locale_(self, JavaUtilLocale_getDefault());
    OrgOcpsoftPrettytimePrettyTime_setAndConsume_units_(self, [[JavaUtilLinkedHashMap alloc] init]);
    [self setLocaleWithJavaUtilLocale:locale];
    OrgOcpsoftPrettytimePrettyTime_initTimeUnits(self);
  }
  return self;
}

- (instancetype)initWithJavaUtilLocale:(JavaUtilLocale *)locale {
  return [self initOrgOcpsoftPrettytimePrettyTimeWithJavaUtilLocale:locale];
}

- (instancetype)initWithJavaUtilDate:(JavaUtilDate *)reference
                  withJavaUtilLocale:(JavaUtilLocale *)locale {
  if (self = [self initOrgOcpsoftPrettytimePrettyTimeWithJavaUtilLocale:locale]) {
    [self setReferenceWithJavaUtilDate:reference];
  }
  return self;
}

- (id<OrgOcpsoftPrettytimeDuration>)approximateDurationWithJavaUtilDate:(JavaUtilDate *)then {
  if (then == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Date to approximate must not be null."] autorelease];
  JavaUtilDate *ref = reference_;
  if (nil == ref) ref = [[[JavaUtilDate alloc] init] autorelease];
  jlong difference = [((JavaUtilDate *) nil_chk(then)) getTime] - [((JavaUtilDate *) nil_chk(ref)) getTime];
  return OrgOcpsoftPrettytimePrettyTime_calculateDurationWithLong_(self, difference);
}

- (void)initTimeUnits {
  OrgOcpsoftPrettytimePrettyTime_initTimeUnits(self);
}

- (void)addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit:(OrgOcpsoftPrettytimeImplResourcesTimeUnit *)unit {
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, unit);
}

- (id<OrgOcpsoftPrettytimeDuration>)calculateDurationWithLong:(jlong)difference {
  return OrgOcpsoftPrettytimePrettyTime_calculateDurationWithLong_(self, difference);
}

- (jlong)getSignWithLong:(jlong)difference {
  return OrgOcpsoftPrettytimePrettyTime_getSignWithLong_(self, difference);
}

- (id<JavaUtilList>)calculatePreciseDurationWithJavaUtilDate:(JavaUtilDate *)then {
  if (then == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Date to calculate must not be null."] autorelease];
  if (nil == reference_) OrgOcpsoftPrettytimePrettyTime_setAndConsume_reference_(self, [[JavaUtilDate alloc] init]);
  id<JavaUtilList> result = [[[JavaUtilArrayList alloc] init] autorelease];
  jlong difference = [((JavaUtilDate *) nil_chk(then)) getTime] - [((JavaUtilDate *) nil_chk(reference_)) getTime];
  id<OrgOcpsoftPrettytimeDuration> duration = OrgOcpsoftPrettytimePrettyTime_calculateDurationWithLong_(self, difference);
  [result addWithId:duration];
  while (0 != [((id<OrgOcpsoftPrettytimeDuration>) nil_chk(duration)) getDelta]) {
    duration = OrgOcpsoftPrettytimePrettyTime_calculateDurationWithLong_(self, [duration getDelta]);
    [result addWithId:duration];
  }
  return result;
}

- (NSString *)formatWithJavaUtilDate:(JavaUtilDate *)then {
  if (then == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Date to format must not be null."] autorelease];
  id<OrgOcpsoftPrettytimeDuration> d = [self approximateDurationWithJavaUtilDate:then];
  return [self formatWithOrgOcpsoftPrettytimeDuration:d];
}

- (NSString *)formatWithJavaUtilCalendar:(JavaUtilCalendar *)then {
  if (then == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Provided Calendar must not be null."] autorelease];
  return [self formatWithJavaUtilDate:[((JavaUtilCalendar *) nil_chk(then)) getTime]];
}

- (NSString *)formatUnroundedWithJavaUtilDate:(JavaUtilDate *)then {
  if (then == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Date to format must not be null."] autorelease];
  id<OrgOcpsoftPrettytimeDuration> d = [self approximateDurationWithJavaUtilDate:then];
  return [self formatUnroundedWithOrgOcpsoftPrettytimeDuration:d];
}

- (NSString *)formatWithOrgOcpsoftPrettytimeDuration:(id<OrgOcpsoftPrettytimeDuration>)duration {
  if (duration == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Duration to format must not be null."] autorelease];
  id<OrgOcpsoftPrettytimeTimeFormat> format = [self getFormatWithOrgOcpsoftPrettytimeTimeUnit:[((id<OrgOcpsoftPrettytimeDuration>) nil_chk(duration)) getUnit]];
  NSString *time = [((id<OrgOcpsoftPrettytimeTimeFormat>) nil_chk(format)) formatWithOrgOcpsoftPrettytimeDuration:duration];
  return [format decorateWithOrgOcpsoftPrettytimeDuration:duration withNSString:time];
}

- (NSString *)formatUnroundedWithOrgOcpsoftPrettytimeDuration:(id<OrgOcpsoftPrettytimeDuration>)duration {
  if (duration == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Duration to format must not be null."] autorelease];
  id<OrgOcpsoftPrettytimeTimeFormat> format = [self getFormatWithOrgOcpsoftPrettytimeTimeUnit:[((id<OrgOcpsoftPrettytimeDuration>) nil_chk(duration)) getUnit]];
  NSString *time = [((id<OrgOcpsoftPrettytimeTimeFormat>) nil_chk(format)) formatUnroundedWithOrgOcpsoftPrettytimeDuration:duration];
  return [format decorateUnroundedWithOrgOcpsoftPrettytimeDuration:duration withNSString:time];
}

- (NSString *)formatWithJavaUtilList:(id<JavaUtilList>)durations {
  if (durations == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Duration list must not be null."] autorelease];
  NSString *result = nil;
  if (durations != nil) {
    JavaLangStringBuilder *builder = [[[JavaLangStringBuilder alloc] init] autorelease];
    id<OrgOcpsoftPrettytimeDuration> duration = nil;
    id<OrgOcpsoftPrettytimeTimeFormat> format = nil;
    for (jint i = 0; i < [durations size]; i++) {
      duration = [durations getWithInt:i];
      format = [self getFormatWithOrgOcpsoftPrettytimeTimeUnit:[((id<OrgOcpsoftPrettytimeDuration>) nil_chk(duration)) getUnit]];
      jboolean isLast = i == [durations size] - 1;
      if (!isLast) {
        [builder appendWithNSString:[((id<OrgOcpsoftPrettytimeTimeFormat>) nil_chk(format)) formatUnroundedWithOrgOcpsoftPrettytimeDuration:duration]];
        [builder appendWithNSString:@" "];
      }
      else {
        [builder appendWithNSString:[((id<OrgOcpsoftPrettytimeTimeFormat>) nil_chk(format)) formatWithOrgOcpsoftPrettytimeDuration:duration]];
      }
    }
    result = [((id<OrgOcpsoftPrettytimeTimeFormat>) nil_chk(format)) decorateUnroundedWithOrgOcpsoftPrettytimeDuration:duration withNSString:[builder description]];
  }
  return result;
}

- (NSString *)formatApproximateDurationWithJavaUtilDate:(JavaUtilDate *)date {
  id<OrgOcpsoftPrettytimeDuration> duration = [self approximateDurationWithJavaUtilDate:date];
  return [self formatDurationWithOrgOcpsoftPrettytimeDuration:duration];
}

- (NSString *)formatDurationWithOrgOcpsoftPrettytimeDuration:(id<OrgOcpsoftPrettytimeDuration>)duration {
  id<OrgOcpsoftPrettytimeTimeFormat> timeFormat = [self getFormatWithOrgOcpsoftPrettytimeTimeUnit:[((id<OrgOcpsoftPrettytimeDuration>) nil_chk(duration)) getUnit]];
  return [((id<OrgOcpsoftPrettytimeTimeFormat>) nil_chk(timeFormat)) formatWithOrgOcpsoftPrettytimeDuration:duration];
}

- (id<OrgOcpsoftPrettytimeTimeFormat>)getFormatWithOrgOcpsoftPrettytimeTimeUnit:(id<OrgOcpsoftPrettytimeTimeUnit>)unit {
  if (unit == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Time unit must not be null."] autorelease];
  if ([((id<JavaUtilMap>) nil_chk(units_)) getWithId:unit] != nil) {
    return [units_ getWithId:unit];
  }
  return nil;
}

- (JavaUtilDate *)getReference {
  return reference_;
}

- (OrgOcpsoftPrettytimePrettyTime *)setReferenceWithJavaUtilDate:(JavaUtilDate *)timestamp {
  OrgOcpsoftPrettytimePrettyTime_set_reference_(self, timestamp);
  return self;
}

- (id<JavaUtilList>)getUnits {
  if (mCachedUnits_ == nil) {
    id<JavaUtilList> result = [[[JavaUtilArrayList alloc] initWithJavaUtilCollection:[((id<JavaUtilMap>) nil_chk(units_)) keySet]] autorelease];
    JavaUtilCollections_sortWithJavaUtilList_withJavaUtilComparator_(result, [[[OrgOcpsoftPrettytimeUnitsTimeUnitComparator alloc] init] autorelease]);
    OrgOcpsoftPrettytimePrettyTime_set_mCachedUnits_(self, JavaUtilCollections_unmodifiableListWithJavaUtilList_(result));
  }
  return mCachedUnits_;
}

- (id)getUnitWithIOSClass:(IOSClass *)unitType {
  if (unitType == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Unit type to get must not be null."] autorelease];
  for (id<OrgOcpsoftPrettytimeTimeUnit> __strong unit in nil_chk([((id<JavaUtilMap>) nil_chk(units_)) keySet])) {
    if ([((IOSClass *) nil_chk(unitType)) isAssignableFrom:[((id<OrgOcpsoftPrettytimeTimeUnit>) nil_chk(unit)) getClass]]) {
      return (id<OrgOcpsoftPrettytimeTimeUnit>) check_protocol_cast(unit, @protocol(OrgOcpsoftPrettytimeTimeUnit));
    }
  }
  return nil;
}

- (OrgOcpsoftPrettytimePrettyTime *)registerUnitWithOrgOcpsoftPrettytimeTimeUnit:(id<OrgOcpsoftPrettytimeTimeUnit>)unit
                                              withOrgOcpsoftPrettytimeTimeFormat:(id<OrgOcpsoftPrettytimeTimeFormat>)format {
  if (unit == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Unit to register must not be null."] autorelease];
  if (format == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Format to register must not be null."] autorelease];
  OrgOcpsoftPrettytimePrettyTime_set_mCachedUnits_(self, nil);
  [((id<JavaUtilMap>) nil_chk(units_)) putWithId:unit withId:format];
  if ([OrgOcpsoftPrettytimeLocaleAware_class_() isInstance:unit]) [((id<OrgOcpsoftPrettytimeLocaleAware>) nil_chk(((id<OrgOcpsoftPrettytimeLocaleAware>) check_protocol_cast(unit, @protocol(OrgOcpsoftPrettytimeLocaleAware))))) setLocaleWithJavaUtilLocale:locale_];
  if ([OrgOcpsoftPrettytimeLocaleAware_class_() isInstance:format]) [((id<OrgOcpsoftPrettytimeLocaleAware>) nil_chk(((id<OrgOcpsoftPrettytimeLocaleAware>) check_protocol_cast(format, @protocol(OrgOcpsoftPrettytimeLocaleAware))))) setLocaleWithJavaUtilLocale:locale_];
  return self;
}

- (id<OrgOcpsoftPrettytimeTimeFormat>)removeUnitWithIOSClass:(IOSClass *)unitType {
  if (unitType == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Unit type to remove must not be null."] autorelease];
  for (id<OrgOcpsoftPrettytimeTimeUnit> __strong unit in nil_chk([((id<JavaUtilMap>) nil_chk(units_)) keySet])) {
    if ([((IOSClass *) nil_chk(unitType)) isAssignableFrom:[((id<OrgOcpsoftPrettytimeTimeUnit>) nil_chk(unit)) getClass]]) {
      OrgOcpsoftPrettytimePrettyTime_set_mCachedUnits_(self, nil);
      return [units_ removeWithId:unit];
    }
  }
  return nil;
}

- (id<OrgOcpsoftPrettytimeTimeFormat>)removeUnitWithOrgOcpsoftPrettytimeTimeUnit:(id<OrgOcpsoftPrettytimeTimeUnit>)unit {
  if (unit == nil) @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Unit to remove must not be null."] autorelease];
  OrgOcpsoftPrettytimePrettyTime_set_mCachedUnits_(self, nil);
  return [((id<JavaUtilMap>) nil_chk(units_)) removeWithId:unit];
}

- (JavaUtilLocale *)getLocale {
  return locale_;
}

- (OrgOcpsoftPrettytimePrettyTime *)setLocaleWithJavaUtilLocale:(JavaUtilLocale *)locale {
  OrgOcpsoftPrettytimePrettyTime_set_locale_(self, locale);
  for (id<OrgOcpsoftPrettytimeTimeUnit> __strong unit in nil_chk([((id<JavaUtilMap>) nil_chk(units_)) keySet])) {
    if ([OrgOcpsoftPrettytimeLocaleAware_class_() isInstance:unit]) [((id<OrgOcpsoftPrettytimeLocaleAware>) nil_chk(((id<OrgOcpsoftPrettytimeLocaleAware>) check_protocol_cast(unit, @protocol(OrgOcpsoftPrettytimeLocaleAware))))) setLocaleWithJavaUtilLocale:locale];
  }
  for (id<OrgOcpsoftPrettytimeTimeFormat> __strong format in nil_chk([units_ values])) {
    if ([OrgOcpsoftPrettytimeLocaleAware_class_() isInstance:format]) [((id<OrgOcpsoftPrettytimeLocaleAware>) nil_chk(((id<OrgOcpsoftPrettytimeLocaleAware>) check_protocol_cast(format, @protocol(OrgOcpsoftPrettytimeLocaleAware))))) setLocaleWithJavaUtilLocale:locale];
  }
  return self;
}

- (NSString *)description {
  return JreStrcat("$@$@C", @"PrettyTime [reference=", reference_, @", locale=", locale_, ']');
}

- (id<JavaUtilList>)clearUnits {
  id<JavaUtilList> result = [self getUnits];
  OrgOcpsoftPrettytimePrettyTime_set_mCachedUnits_(self, nil);
  [((id<JavaUtilMap>) nil_chk(units_)) clear];
  return result;
}

- (void)dealloc {
  RELEASE_(reference_);
  RELEASE_(locale_);
  RELEASE_(units_);
  RELEASE_(mCachedUnits_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgOcpsoftPrettytimePrettyTime *)other {
  [super copyAllFieldsTo:other];
  OrgOcpsoftPrettytimePrettyTime_set_reference_(other, reference_);
  OrgOcpsoftPrettytimePrettyTime_set_locale_(other, locale_);
  OrgOcpsoftPrettytimePrettyTime_set_units_(other, units_);
  OrgOcpsoftPrettytimePrettyTime_set_mCachedUnits_(other, mCachedUnits_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "PrettyTime", NULL, 0x1, NULL },
    { "initWithJavaUtilDate:", "PrettyTime", NULL, 0x1, NULL },
    { "initWithJavaUtilLocale:", "PrettyTime", NULL, 0x1, NULL },
    { "initWithJavaUtilDate:withJavaUtilLocale:", "PrettyTime", NULL, 0x1, NULL },
    { "approximateDurationWithJavaUtilDate:", "approximateDuration", "Lorg.ocpsoft.prettytime.Duration;", 0x1, NULL },
    { "initTimeUnits", NULL, "V", 0x2, NULL },
    { "addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit:", "addUnit", "V", 0x2, NULL },
    { "calculateDurationWithLong:", "calculateDuration", "Lorg.ocpsoft.prettytime.Duration;", 0x2, NULL },
    { "getSignWithLong:", "getSign", "J", 0x2, NULL },
    { "calculatePreciseDurationWithJavaUtilDate:", "calculatePreciseDuration", "Ljava.util.List;", 0x1, NULL },
    { "formatWithJavaUtilDate:", "format", "Ljava.lang.String;", 0x1, NULL },
    { "formatWithJavaUtilCalendar:", "format", "Ljava.lang.String;", 0x1, NULL },
    { "formatUnroundedWithJavaUtilDate:", "formatUnrounded", "Ljava.lang.String;", 0x1, NULL },
    { "formatWithOrgOcpsoftPrettytimeDuration:", "format", "Ljava.lang.String;", 0x1, NULL },
    { "formatUnroundedWithOrgOcpsoftPrettytimeDuration:", "formatUnrounded", "Ljava.lang.String;", 0x1, NULL },
    { "formatWithJavaUtilList:", "format", "Ljava.lang.String;", 0x1, NULL },
    { "formatApproximateDurationWithJavaUtilDate:", "formatApproximateDuration", "Ljava.lang.String;", 0x1, NULL },
    { "formatDurationWithOrgOcpsoftPrettytimeDuration:", "formatDuration", "Ljava.lang.String;", 0x1, NULL },
    { "getFormatWithOrgOcpsoftPrettytimeTimeUnit:", "getFormat", "Lorg.ocpsoft.prettytime.TimeFormat;", 0x1, NULL },
    { "getReference", NULL, "Ljava.util.Date;", 0x1, NULL },
    { "setReferenceWithJavaUtilDate:", "setReference", "Lorg.ocpsoft.prettytime.PrettyTime;", 0x1, NULL },
    { "getUnits", NULL, "Ljava.util.List;", 0x1, NULL },
    { "getUnitWithIOSClass:", "getUnit", "TUNIT;", 0x1, NULL },
    { "registerUnitWithOrgOcpsoftPrettytimeTimeUnit:withOrgOcpsoftPrettytimeTimeFormat:", "registerUnit", "Lorg.ocpsoft.prettytime.PrettyTime;", 0x1, NULL },
    { "removeUnitWithIOSClass:", "removeUnit", "Lorg.ocpsoft.prettytime.TimeFormat;", 0x1, NULL },
    { "removeUnitWithOrgOcpsoftPrettytimeTimeUnit:", "removeUnit", "Lorg.ocpsoft.prettytime.TimeFormat;", 0x1, NULL },
    { "getLocale", NULL, "Ljava.util.Locale;", 0x1, NULL },
    { "setLocaleWithJavaUtilLocale:", "setLocale", "Lorg.ocpsoft.prettytime.PrettyTime;", 0x1, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL },
    { "clearUnits", NULL, "Ljava.util.List;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "reference_", NULL, 0x42, "Ljava.util.Date;", NULL,  },
    { "locale_", NULL, 0x42, "Ljava.util.Locale;", NULL,  },
    { "units_", NULL, 0x42, "Ljava.util.Map;", NULL,  },
    { "mCachedUnits_", NULL, 0x2, "Ljava.util.List;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgOcpsoftPrettytimePrettyTime = { 1, "PrettyTime", "org.ocpsoft.prettytime", NULL, 0x1, 30, methods, 4, fields, 0, NULL};
  return &_OrgOcpsoftPrettytimePrettyTime;
}

@end

void OrgOcpsoftPrettytimePrettyTime_initTimeUnits(OrgOcpsoftPrettytimePrettyTime *self) {
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsJustNow alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsMillisecond alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsSecond alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsMinute alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsHour alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsDay alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsWeek alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsMonth alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsYear alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsDecade alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsCentury alloc] init] autorelease]);
  OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(self, [[[OrgOcpsoftPrettytimeUnitsMillennium alloc] init] autorelease]);
}

void OrgOcpsoftPrettytimePrettyTime_addUnitWithOrgOcpsoftPrettytimeImplResourcesTimeUnit_(OrgOcpsoftPrettytimePrettyTime *self, OrgOcpsoftPrettytimeImplResourcesTimeUnit *unit) {
  [self registerUnitWithOrgOcpsoftPrettytimeTimeUnit:unit withOrgOcpsoftPrettytimeTimeFormat:[[[OrgOcpsoftPrettytimeImplResourcesTimeFormat alloc] initWithOrgOcpsoftPrettytimeImplResourcesTimeUnit:unit] autorelease]];
}

id<OrgOcpsoftPrettytimeDuration> OrgOcpsoftPrettytimePrettyTime_calculateDurationWithLong_(OrgOcpsoftPrettytimePrettyTime *self, jlong difference) {
  jlong absoluteDifference = JavaLangMath_absWithLong_(difference);
  id<JavaUtilList> localUnits = [self getUnits];
  OrgOcpsoftPrettytimeImplDurationImpl *result = [[[OrgOcpsoftPrettytimeImplDurationImpl alloc] init] autorelease];
  for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(localUnits)) size]; i++) {
    id<OrgOcpsoftPrettytimeTimeUnit> unit = [localUnits getWithInt:i];
    jlong millisPerUnit = JavaLangMath_absWithLong_([((id<OrgOcpsoftPrettytimeTimeUnit>) nil_chk(unit)) getMillisPerUnit]);
    jlong quantity = JavaLangMath_absWithLong_([unit getMaxQuantity]);
    jboolean isLastUnit = i == [localUnits size] - 1;
    if ((0 == quantity) && !isLastUnit) {
      quantity = [((id<OrgOcpsoftPrettytimeTimeUnit>) nil_chk([localUnits getWithInt:i + 1])) getMillisPerUnit] / [unit getMillisPerUnit];
    }
    if ((millisPerUnit * quantity > absoluteDifference) || isLastUnit) {
      [result setUnitWithOrgOcpsoftPrettytimeTimeUnit:unit];
      if (millisPerUnit > absoluteDifference) {
        [result setQuantityWithLong:OrgOcpsoftPrettytimePrettyTime_getSignWithLong_(self, difference)];
        [result setDeltaWithLong:0];
      }
      else {
        [result setQuantityWithLong:difference / millisPerUnit];
        [result setDeltaWithLong:difference - [result getQuantity] * millisPerUnit];
      }
      break;
    }
  }
  return result;
}

jlong OrgOcpsoftPrettytimePrettyTime_getSignWithLong_(OrgOcpsoftPrettytimePrettyTime *self, jlong difference) {
  if (0 > difference) {
    return -1;
  }
  else {
    return 1;
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgOcpsoftPrettytimePrettyTime)
